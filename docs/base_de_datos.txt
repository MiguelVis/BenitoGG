Base de Datos
-------------

La base de datos SQLite mantiene el estado del juego en todo momento, por lo que es parte esencial del mismo.

No es necesaria la intervención del usuario para guardar el estado del juego.

Por otra parte, existe un opción en el menú, por la cual es posible reinicializar la base de datos, y dejarla en el estado inicial.

La base de datos se compone de 4 tablas:

Actores: actores del juego, incluyendo al protagonista.
Casos: casos o misterios a resolver.
Lugares: lugares por los que puede desplazarse el protagonista, y otros lugares especiales, incluyendo el bolsillo.
Objetos: objetos con los que puede interactuar el protagonista.

Los datos iniciales de las tablas, es decir, el estado inicial del juego, están almacenados en 4 archivos de texto, uno por tabla:

zeta_actores.txt
zeta_casos.txt
zeta_lugares.txt
zeta_objetos.txt

El contenido de dichos archivos ha sido editado directamente en Android Studio, y están codificados según la norma UTF-8, sin cabecera. Es importante reseñar, que algunos editores de texto añaden una cabecera, para indicar que el contenido está codificado en UTF-8. Dicha cabecera no es tratada adecuadamente por Android, dando lugar a errores.

El formato interno de estos archivos es el siguiente:

Las líneas que principien con el caracter # son descartadas, por lo que pueden utilizarse como comentarios.
Las líneas en blanco también son ignoradas.
Las columnas (campos), ocupan una línea de texto cada una, en el orden en que aparecen en la fila (registro) de la tabla.
Cada fila (registro), termina con una línea en blanco, una línea de comentario, o el fin del fichero. Por lo tanto, no puede haber líneas de comentarios entre columnas (campos) pertenecientes a la misma fila (registro).
Los valores null para las columnas (campos), se indican literalmente como null.

Sólo para los datos de la columna (campo) detalle, de la tabla Lugares:

Cualquier ocurrencia del literal <br> dentro del valor de la columna, será sustituido por el caracter de nueva línea \n.

Ejemplo:

01 # Tabla actores: id (text), lugarId (text)
02 # ----------------------------------------
03
04 # Protagonista:
05 # -------------
06 prota
07 oficina
08 # Otros actores:
09 # --------------
10 periquito
11 pq_zillo
12 #
13 perro
14 pl_mangui
15 #
16 cartero
17 null

La estructura de las tablas es la siguiente:

create table Actores (
	_id text primary key not null,
	lugar_id_fk text not null,
	foreign key(lugar_id_fk) referencies Lugares(_id)
	 );

create table Casos (
	_id int primary key not null,
	nombre text not null,
	resuelto int not null,
	);

create table Lugares (
	_id text primary key not null,
	titulo text not null,
	detalle text not null,
	sonido text,
	lugar_norte_fk text,
	lugar_sur_fk text,
	lugar_este_fk text,
	lugar_oeste_fk text,
	foreign key(lugar_norte_fk) references Lugares(_id),
	foreign key(lugar_sur_fk) references Lugares(_id),
	foreign key(lugar_este_fk) references Lugares(_id),
	foreign key(lugar_oeste_fk) references Lugares(_id)
	);

create table Objetos (
	_id text primary key not null,
	nombre text not null,
	lugar_id_fk text not null,
	estado text not null,
	foreign key(lugar_id_fk) references Lugares(_id)
	);
